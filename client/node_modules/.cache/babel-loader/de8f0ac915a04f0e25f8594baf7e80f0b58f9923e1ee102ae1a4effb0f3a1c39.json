{"ast":null,"code":"var _jsxFileName = \"C:\\\\stranger-chat-v2\\\\client\\\\src\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport io from 'socket.io-client';\nimport Picker from 'emoji-picker-react';\nimport './style.css';\n\n// âœ… Change this to your LAN IP if accessing from phone\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:3000');\nfunction Chat({\n  nickname\n}) {\n  _s();\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [partner, setPartner] = useState(null);\n  const [showEmoji, setShowEmoji] = useState(false);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n  useEffect(() => {\n    socket.emit(\"join\", nickname);\n    socket.on(\"message\", data => {\n      setMessages(msgs => [...msgs, data]);\n    });\n    socket.on(\"partner\", name => {\n      setPartner(name);\n      setMessages([]);\n    });\n    return () => socket.disconnect();\n  }, [nickname]);\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const sendMessage = () => {\n    if (message.trim()) {\n      socket.emit(\"message\", message);\n      setMessage('');\n      setShowEmoji(false);\n    }\n  };\n  const skipPartner = () => {\n    socket.emit(\"skip\");\n    setMessages([]);\n  };\n  const onEmojiClick = emojiData => {\n    setMessage(prev => prev + emojiData.emoji);\n    inputRef.current.focus();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [nickname, \" (You)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), partner && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" \\uD83D\\uDD17 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: partner\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: skipPartner,\n        className: \"skip-button\",\n        children: \"Skip\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [msg.sender, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), \" \", msg.text]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowEmoji(!showEmoji),\n        className: \"emoji-toggle\",\n        children: \"\\uD83D\\uDE00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: \"text\",\n        placeholder: \"Type your message...\",\n        value: message,\n        onChange: e => setMessage(e.target.value),\n        onKeyDown: e => e.key === 'Enter' && sendMessage()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        className: \"send-button\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), showEmoji && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"emoji-picker\",\n      children: /*#__PURE__*/_jsxDEV(Picker, {\n        onEmojiClick: onEmojiClick,\n        theme: \"dark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"4ZKj9BfvQQbIL4beymlSa+pvswg=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","Picker","jsxDEV","_jsxDEV","socket","Chat","nickname","_s","message","setMessage","messages","setMessages","partner","setPartner","showEmoji","setShowEmoji","inputRef","chatEndRef","emit","on","data","msgs","name","disconnect","_chatEndRef$current","current","scrollIntoView","behavior","sendMessage","trim","skipPartner","onEmojiClick","emojiData","prev","emoji","focus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","msg","i","sender","text","ref","type","placeholder","value","onChange","e","target","onKeyDown","key","theme","_c","$RefreshReg$"],"sources":["C:/stranger-chat-v2/client/src/Chat.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport io from 'socket.io-client';\r\nimport Picker from 'emoji-picker-react';\r\nimport './style.css';\r\n\r\n// âœ… Change this to your LAN IP if accessing from phone\r\nconst socket = io('http://localhost:3000');\r\n\r\nfunction Chat({ nickname }) {\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [partner, setPartner] = useState(null);\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const inputRef = useRef(null);\r\n  const chatEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"join\", nickname);\r\n\r\n    socket.on(\"message\", (data) => {\r\n      setMessages((msgs) => [...msgs, data]);\r\n    });\r\n\r\n    socket.on(\"partner\", (name) => {\r\n      setPartner(name);\r\n      setMessages([]);\r\n    });\r\n\r\n    return () => socket.disconnect();\r\n  }, [nickname]);\r\n\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const sendMessage = () => {\r\n    if (message.trim()) {\r\n      socket.emit(\"message\", message);\r\n      setMessage('');\r\n      setShowEmoji(false);\r\n    }\r\n  };\r\n\r\n  const skipPartner = () => {\r\n    socket.emit(\"skip\");\r\n    setMessages([]);\r\n  };\r\n\r\n  const onEmojiClick = (emojiData) => {\r\n    setMessage((prev) => prev + emojiData.emoji);\r\n    inputRef.current.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <div className=\"chat-header\">\r\n        <div>\r\n          <strong>{nickname} (You)</strong>\r\n          {partner && <span> ðŸ”— <strong>{partner}</strong></span>}\r\n        </div>\r\n        <button onClick={skipPartner} className=\"skip-button\">Skip</button>\r\n      </div>\r\n\r\n      <div className=\"chat-box\">\r\n        {messages.map((msg, i) => (\r\n          <div className=\"message\" key={i}>\r\n            <strong>{msg.sender}:</strong> {msg.text}\r\n          </div>\r\n        ))}\r\n        <div ref={chatEndRef} />\r\n      </div>\r\n\r\n      <div className=\"input-section\">\r\n        <button onClick={() => setShowEmoji(!showEmoji)} className=\"emoji-toggle\">ðŸ˜€</button>\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          placeholder=\"Type your message...\"\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && sendMessage()}\r\n        />\r\n        <button onClick={sendMessage} className=\"send-button\">Send</button>\r\n      </div>\r\n\r\n      {showEmoji && (\r\n        <div className=\"emoji-picker\">\r\n          <Picker onEmojiClick={onEmojiClick} theme=\"dark\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAOC,MAAM,MAAM,oBAAoB;AACvC,OAAO,aAAa;;AAEpB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,MAAM,GAAGJ,EAAE,CAAC,uBAAuB,CAAC;AAE1C,SAASK,IAAIA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC1B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAMkB,QAAQ,GAAGjB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMkB,UAAU,GAAGlB,MAAM,CAAC,IAAI,CAAC;EAE/BF,SAAS,CAAC,MAAM;IACdO,MAAM,CAACc,IAAI,CAAC,MAAM,EAAEZ,QAAQ,CAAC;IAE7BF,MAAM,CAACe,EAAE,CAAC,SAAS,EAAGC,IAAI,IAAK;MAC7BT,WAAW,CAAEU,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAED,IAAI,CAAC,CAAC;IACxC,CAAC,CAAC;IAEFhB,MAAM,CAACe,EAAE,CAAC,SAAS,EAAGG,IAAI,IAAK;MAC7BT,UAAU,CAACS,IAAI,CAAC;MAChBX,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,CAAC;IAEF,OAAO,MAAMP,MAAM,CAACmB,UAAU,CAAC,CAAC;EAClC,CAAC,EAAE,CAACjB,QAAQ,CAAC,CAAC;EAEdT,SAAS,CAAC,MAAM;IAAA,IAAA2B,mBAAA;IACd,CAAAA,mBAAA,GAAAP,UAAU,CAACQ,OAAO,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAC5D,CAAC,EAAE,CAACjB,QAAQ,CAAC,CAAC;EAEd,MAAMkB,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAIpB,OAAO,CAACqB,IAAI,CAAC,CAAC,EAAE;MAClBzB,MAAM,CAACc,IAAI,CAAC,SAAS,EAAEV,OAAO,CAAC;MAC/BC,UAAU,CAAC,EAAE,CAAC;MACdM,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMe,WAAW,GAAGA,CAAA,KAAM;IACxB1B,MAAM,CAACc,IAAI,CAAC,MAAM,CAAC;IACnBP,WAAW,CAAC,EAAE,CAAC;EACjB,CAAC;EAED,MAAMoB,YAAY,GAAIC,SAAS,IAAK;IAClCvB,UAAU,CAAEwB,IAAI,IAAKA,IAAI,GAAGD,SAAS,CAACE,KAAK,CAAC;IAC5ClB,QAAQ,CAACS,OAAO,CAACU,KAAK,CAAC,CAAC;EAC1B,CAAC;EAED,oBACEhC,OAAA;IAAKiC,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC7BlC,OAAA;MAAKiC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BlC,OAAA;QAAAkC,QAAA,gBACElC,OAAA;UAAAkC,QAAA,GAAS/B,QAAQ,EAAC,QAAM;QAAA;UAAAgC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAChC7B,OAAO,iBAAIT,OAAA;UAAAkC,QAAA,GAAM,gBAAI,eAAAlC,OAAA;YAAAkC,QAAA,EAASzB;UAAO;YAAA0B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpD,CAAC,eACNtC,OAAA;QAAQuC,OAAO,EAAEZ,WAAY;QAACM,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAC;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC,eAENtC,OAAA;MAAKiC,SAAS,EAAC,UAAU;MAAAC,QAAA,GACtB3B,QAAQ,CAACiC,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,kBACnB1C,OAAA;QAAKiC,SAAS,EAAC,SAAS;QAAAC,QAAA,gBACtBlC,OAAA;UAAAkC,QAAA,GAASO,GAAG,CAACE,MAAM,EAAC,GAAC;QAAA;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACG,GAAG,CAACG,IAAI;MAAA,GADZF,CAAC;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAE1B,CACN,CAAC,eACFtC,OAAA;QAAK6C,GAAG,EAAE/B;MAAW;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrB,CAAC,eAENtC,OAAA;MAAKiC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BlC,OAAA;QAAQuC,OAAO,EAAEA,CAAA,KAAM3B,YAAY,CAAC,CAACD,SAAS,CAAE;QAACsB,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACrFtC,OAAA;QACE6C,GAAG,EAAEhC,QAAS;QACdiC,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,sBAAsB;QAClCC,KAAK,EAAE3C,OAAQ;QACf4C,QAAQ,EAAGC,CAAC,IAAK5C,UAAU,CAAC4C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;QAC5CI,SAAS,EAAGF,CAAC,IAAKA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAI5B,WAAW,CAAC;MAAE;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtD,CAAC,eACFtC,OAAA;QAAQuC,OAAO,EAAEd,WAAY;QAACQ,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAC;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC,EAEL3B,SAAS,iBACRX,OAAA;MAAKiC,SAAS,EAAC,cAAc;MAAAC,QAAA,eAC3BlC,OAAA,CAACF,MAAM;QAAC8B,YAAY,EAAEA,YAAa;QAAC0B,KAAK,EAAC;MAAM;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChD,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAClC,EAAA,CApFQF,IAAI;AAAAqD,EAAA,GAAJrD,IAAI;AAsFb,eAAeA,IAAI;AAAC,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}